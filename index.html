<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nyanvil.site</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <header>
        <h1>Nyanvil.site</h1>
        <nav>
            <ul>
                <li><a href="index.html">About Me</a></li>
                <li><a href="blog.html">Blog</a></li>
            </ul>
        </nav>
    </header>

    <!-- Last.fm Now Playing Banner -->
    <div id="lastfm-banner" style="width:100%;background:#181818;color:#fff;padding:10px 0;text-align:center;font-family:sans-serif;font-size:16px;letter-spacing:0.5px;">
      <span id="lastfm-status">Loading your Last.fm status...</span>
    </div>

    <main>
        <section id="about">
            <h2>About Me</h2>
            <p>Hey cunts, We are the Anvil System. We have 3 alters.</p>
            <p>More abt em later.</p>
            <p>We're 19. Our main hobbies are tinkering with tech, all things music, travelling and learning languages.</p>
            <p></p>
            <h2>Alters</h2>
            <p>Angela (Host) ~ She/they/it</p>
            <p>Vera ~ She/her</p>
            <p>Zom ~ Any pronouns</p>
        </section>
        <section id="bullshit">
            <h2>Bullshit</h2>
            <p>heres our retarded snake game</p>
            <a href="snake.html">click</a>
        </section>
    </main>


    <footer>
        <p>&copy; 2025 no copyright do whatever the fuck u want.</p>
        <p><a href="https://github.com/nyanvil/nyanvil.site" target="_blank">GitHub Repository</a></p>
    </footer>
</body>
<script>
// Last.fm Now Playing Banner Script
const lastfmUser = 'lumenreturns';
const statusSpan = document.getElementById('lastfm-status');

function updateLastfmBanner() {
  fetch(`/lastfm/method=user.getrecenttracks&user=${lastfmUser}&limit=1`)
    .then(res => res.json())
    .then(data => {
      const track = data.recenttracks && data.recenttracks.track && data.recenttracks.track[0];
      if (!track) {
        statusSpan.textContent = "Couldn't load Last.fm status.";
        return;
      }
      const artist = track.artist['#text'] || 'Unknown Artist';
      const song = track.name || 'Unknown Track';
      const album = track.album['#text'] || '';
      const nowPlaying = track['@attr'] && track['@attr'].nowplaying === 'true';
      const url = track.url || null;
      let msg = '';
      if (nowPlaying) {
        msg = `ðŸŽ§ Now listening to <b><a href="${url}" target="_blank" style="color:#7ddcff;text-decoration:underline;">${song}</a></b> by <b>${artist}</b>${album ? ` from <b>${album}</b>` : ''}`;
      } else {
        msg = `Last played: <b><a href="${url}" target="_blank" style="color:#7ddcff;text-decoration:underline;">${song}</a></b> by <b>${artist}</b>${album ? ` from <b>${album}</b>` : ''}`;
      }
      statusSpan.innerHTML = msg;
    })
    .catch(() => {
      statusSpan.textContent = "Couldn't load Last.fm status.";
    });
}

updateLastfmBanner();
// Optionally refresh every 60 seconds
setInterval(updateLastfmBanner, 60000);
</script>
</html>
